import{T as L,U as v,c as P,w as b,D as C,o as O,N as z,g as M,P as H}from"./index.c51451b2.js";const N=[null,document,document.body,document.scrollingElement,document.documentElement];function W(t,o){let e=L(o);if(e===void 0){if(t==null)return window;e=t.closest(".scroll,.scroll-y,.overflow-auto")}return N.includes(e)?window:e}function T(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function x(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}function y(t,o,e=0){const n=arguments[3]===void 0?performance.now():arguments[3],i=T(t);if(e<=0){i!==o&&w(t,o);return}requestAnimationFrame(c=>{const l=c-n,s=i+(o-i)/Math.max(l,e)*l;w(t,s),s!==o&&y(t,o,e-l,c)})}function E(t,o,e=0){const n=arguments[3]===void 0?performance.now():arguments[3],i=x(t);if(e<=0){i!==o&&p(t,o);return}requestAnimationFrame(c=>{const l=c-n,s=i+(o-i)/Math.max(l,e)*l;p(t,s),s!==o&&E(t,o,e-l,c)})}function w(t,o){if(t===window){window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,o);return}t.scrollTop=o}function p(t,o){if(t===window){window.scrollTo(o,window.pageYOffset||window.scrollY||document.body.scrollTop||0);return}t.scrollLeft=o}function F(t,o,e){if(e){y(t,o,e);return}w(t,o)}function V(t,o,e){if(e){E(t,o,e);return}p(t,o)}let f;function X(){if(f!==void 0)return f;const t=document.createElement("p"),o=document.createElement("div");v(t,{width:"100%",height:"200px"}),v(o,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),o.appendChild(t),document.body.appendChild(o);const e=t.offsetWidth;o.style.overflow="scroll";let n=t.offsetWidth;return e===n&&(n=o.clientWidth),o.remove(),f=e-n,f}function Y(t,o=!0){return!t||t.nodeType!==Node.ELEMENT_NODE?!1:o?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"]))}const{passive:S}=H,q=["both","horizontal","vertical"];var D=P({name:"QScrollObserver",props:{axis:{type:String,validator:t=>q.includes(t),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(t,{emit:o}){const e={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let n=null,i,c;b(()=>t.scrollTarget,()=>{g(),s()});function l(){n!==null&&n();const d=Math.max(0,T(i)),u=x(i),r={top:d-e.position.top,left:u-e.position.left};if(t.axis==="vertical"&&r.top===0||t.axis==="horizontal"&&r.left===0)return;const h=Math.abs(r.top)>=Math.abs(r.left)?r.top<0?"up":"down":r.left<0?"left":"right";e.position={top:d,left:u},e.directionChanged=e.direction!==h,e.delta=r,e.directionChanged===!0&&(e.direction=h,e.inflectionPoint=e.position),o("scroll",{...e})}function s(){i=W(c,t.scrollTarget),i.addEventListener("scroll",a,S),a(!0)}function g(){i!==void 0&&(i.removeEventListener("scroll",a,S),i=void 0)}function a(d){if(d===!0||t.debounce===0||t.debounce==="0")l();else if(n===null){const[u,r]=t.debounce?[setTimeout(l,t.debounce),clearTimeout]:[requestAnimationFrame(l),cancelAnimationFrame];n=()=>{r(u),n=null}}}const{proxy:m}=M();return b(()=>m.$q.lang.rtl,l),C(()=>{c=m.$el.parentNode,s()}),O(()=>{n!==null&&n(),g()}),Object.assign(m,{trigger:a,getPosition:()=>e}),z}});export{D as Q,V as a,W as b,x as c,T as d,X as g,Y as h,F as s};
