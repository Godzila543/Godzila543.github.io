import{Q as ne}from"./QSpace.072bc939.js";import{c as Z,u as De,a as ke,b as m,w as x,i as Ce,e as V,r as T,d as Ee,o as Ae,h as _e,f as _,l as ce,g as de,p as Oe,j as xe,k as Be,m as K,n as Ie,_ as Ue,q as je,s as Ne,t as He,v as ze,x as we,y as Ve,z as E,A as Qe,B as b,C as We,D as Me,F as Fe,E as ae,G as Ge,Q as ge,H as Y}from"./index.87a04e90.js";import{u as Ke,a as Ye,b as Je,Q as Xe}from"./QTabs.8ee498dc.js";import{Q as ue,a as Ze}from"./use-dark.b2a1d048.js";import{g as se,Q as et,a as tt,b as me}from"./QScrollObserver.96e5bc37.js";import{Q as nt}from"./QDialog.5d2fad78.js";import{b as re}from"./palette.fef6045e.js";var at=Z({name:"QRouteTab",props:{...De,...Ke},emits:Ye,setup(t,{slots:e,emit:n}){const a=ke({useDisableForRouterLinkProps:!1}),{renderTab:s,$tabs:r}=Je(t,e,n,{exact:m(()=>t.exact),...a});return x(()=>`${t.name} | ${t.exact} | ${(a.resolvedLink.value||{}).href}`,()=>{r.verifyRouteModel()}),()=>s(a.linkTag.value,a.linkAttrs.value)}}),st=Z({name:"QFooter",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(t,{slots:e,emit:n}){const{proxy:{$q:a}}=de(),s=Ce(ce,V);if(s===V)return console.error("QFooter needs to be child of QLayout"),V;const r=T(parseInt(t.heightHint,10)),i=T(!0),o=T(Ee.value===!0||s.isContainer.value===!0?0:window.innerHeight),u=m(()=>t.reveal===!0||s.view.value.indexOf("F")>-1||a.platform.is.ios&&s.isContainer.value===!0),f=m(()=>s.isContainer.value===!0?s.containerHeight.value:o.value),q=m(()=>{if(t.modelValue!==!0)return 0;if(u.value===!0)return i.value===!0?r.value:0;const l=s.scroll.value.position+f.value+r.value-s.height.value;return l>0?l:0}),L=m(()=>t.modelValue!==!0||u.value===!0&&i.value!==!0),B=m(()=>t.modelValue===!0&&L.value===!0&&t.reveal===!0),W=m(()=>"q-footer q-layout__section--marginal "+(u.value===!0?"fixed":"absolute")+"-bottom"+(t.bordered===!0?" q-footer--bordered":"")+(L.value===!0?" q-footer--hidden":"")+(t.modelValue!==!0?" q-layout--prevent-focus"+(u.value!==!0?" hidden":""):"")),M=m(()=>{const l=s.rows.value.bottom,w={};return l[0]==="l"&&s.left.space===!0&&(w[a.lang.rtl===!0?"right":"left"]=`${s.left.size}px`),l[2]==="r"&&s.right.space===!0&&(w[a.lang.rtl===!0?"left":"right"]=`${s.right.size}px`),w});function P(l,w){s.update("footer",l,w)}function O(l,w){l.value!==w&&(l.value=w)}function I({height:l}){O(r,l),P("size",l)}function D(){if(t.reveal!==!0)return;const{direction:l,position:w,inflectionPoint:v}=s.scroll.value;O(i,l==="up"||w-v<100||s.height.value-f.value-w-r.value<300)}function N(l){B.value===!0&&O(i,!0),n("focusin",l)}x(()=>t.modelValue,l=>{P("space",l),O(i,!0),s.animate()}),x(q,l=>{P("offset",l)}),x(()=>t.reveal,l=>{l===!1&&O(i,t.modelValue)}),x(i,l=>{s.animate(),n("reveal",l)}),x([r,s.scroll,s.height],D),x(()=>a.screen.height,l=>{s.isContainer.value!==!0&&O(o,l)});const c={};return s.instances.footer=c,t.modelValue===!0&&P("size",r.value),P("space",t.modelValue),P("offset",q.value),Ae(()=>{s.instances.footer===c&&(s.instances.footer=void 0,P("size",0),P("offset",0),P("space",!1))}),()=>{const l=_e(e.default,[_(ue,{debounce:0,onResize:I})]);return t.elevated===!0&&l.push(_("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),_("footer",{class:W.value,style:M.value,onFocusin:N},l)}}}),rt=Z({name:"QPageContainer",setup(t,{slots:e}){const{proxy:{$q:n}}=de(),a=Ce(ce,V);if(a===V)return console.error("QPageContainer needs to be child of QLayout"),V;Oe(Be,!0);const s=m(()=>{const r={};return a.header.space===!0&&(r.paddingTop=`${a.header.size}px`),a.right.space===!0&&(r[`padding${n.lang.rtl===!0?"Left":"Right"}`]=`${a.right.size}px`),a.footer.space===!0&&(r.paddingBottom=`${a.footer.size}px`),a.left.space===!0&&(r[`padding${n.lang.rtl===!0?"Right":"Left"}`]=`${a.left.size}px`),r});return()=>_("div",{class:"q-page-container",style:s.value},xe(e.default))}}),it=Z({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:t=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(t.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(t,{slots:e,emit:n}){const{proxy:{$q:a}}=de(),s=T(null),r=T(a.screen.height),i=T(t.container===!0?0:a.screen.width),o=T({position:0,direction:"down",inflectionPoint:0}),u=T(0),f=T(Ee.value===!0?0:se()),q=m(()=>"q-layout q-layout--"+(t.container===!0?"containerized":"standard")),L=m(()=>t.container===!1?{minHeight:a.screen.height+"px"}:null),B=m(()=>f.value!==0?{[a.lang.rtl===!0?"left":"right"]:`${f.value}px`}:null),W=m(()=>f.value!==0?{[a.lang.rtl===!0?"right":"left"]:0,[a.lang.rtl===!0?"left":"right"]:`-${f.value}px`,width:`calc(100% + ${f.value}px)`}:null);function M(c){if(t.container===!0||document.qScrollPrevented!==!0){const l={position:c.position.top,direction:c.direction,directionChanged:c.directionChanged,inflectionPoint:c.inflectionPoint.top,delta:c.delta.top};o.value=l,t.onScroll!==void 0&&n("scroll",l)}}function P(c){const{height:l,width:w}=c;let v=!1;r.value!==l&&(v=!0,r.value=l,t.onScrollHeight!==void 0&&n("scrollHeight",l),I()),i.value!==w&&(v=!0,i.value=w),v===!0&&t.onResize!==void 0&&n("resize",c)}function O({height:c}){u.value!==c&&(u.value=c,I())}function I(){if(t.container===!0){const c=r.value>u.value?se():0;f.value!==c&&(f.value=c)}}let D=null;const N={instances:{},view:m(()=>t.view),isContainer:m(()=>t.container),rootRef:s,height:r,containerHeight:u,scrollbarWidth:f,totalWidth:m(()=>i.value+f.value),rows:m(()=>{const c=t.view.toLowerCase().split(" ");return{top:c[0].split(""),middle:c[1].split(""),bottom:c[2].split("")}}),header:K({size:0,offset:0,space:!1}),right:K({size:300,offset:0,space:!1}),footer:K({size:0,offset:0,space:!1}),left:K({size:300,offset:0,space:!1}),scroll:o,animate(){D!==null?clearTimeout(D):document.body.classList.add("q-body--layout-animate"),D=setTimeout(()=>{D=null,document.body.classList.remove("q-body--layout-animate")},155)},update(c,l,w){N[c][l]=w}};if(Oe(ce,N),se()>0){let w=function(){c=null,l.classList.remove("hide-scrollbar")},v=function(){if(c===null){if(l.scrollHeight>a.screen.height)return;l.classList.add("hide-scrollbar")}else clearTimeout(c);c=setTimeout(w,300)},h=function($){c!==null&&$==="remove"&&(clearTimeout(c),w()),window[`${$}EventListener`]("resize",v)},c=null;const l=document.body;x(()=>t.container!==!0?"add":"remove",h),t.container!==!0&&h("add"),Ie(()=>{h("remove")})}return()=>{const c=_e(e.default,[_(et,{onScroll:M}),_(ue,{onResize:P})]),l=_("div",{class:q.value,style:L.value,ref:t.container===!0?void 0:s,tabindex:-1},c);return t.container===!0?_("div",{class:"q-layout-container overflow-hidden",ref:s},[_(ue,{onResize:O}),_("div",{class:"absolute-full",style:B.value},[_("div",{class:"scroll",style:W.value},[l])])]):l}}}),ye;(function(t){t[t.SCAN_MODE_LOW_POWER=0]="SCAN_MODE_LOW_POWER",t[t.SCAN_MODE_BALANCED=1]="SCAN_MODE_BALANCED",t[t.SCAN_MODE_LOW_LATENCY=2]="SCAN_MODE_LOW_LATENCY"})(ye||(ye={}));var be;(function(t){t[t.CONNECTION_PRIORITY_BALANCED=0]="CONNECTION_PRIORITY_BALANCED",t[t.CONNECTION_PRIORITY_HIGH=1]="CONNECTION_PRIORITY_HIGH",t[t.CONNECTION_PRIORITY_LOW_POWER=2]="CONNECTION_PRIORITY_LOW_POWER"})(be||(be={}));/*! Capacitor: https://capacitorjs.com/ - MIT License */const ot=t=>{const e=new Map;e.set("web",{name:"web"});const n=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},a=(r,i)=>{n.platforms.set(r,i)},s=r=>{n.platforms.has(r)&&(n.currentPlatform=n.platforms.get(r))};return n.addPlatform=a,n.setPlatform=s,n},lt=t=>t.CapacitorPlatforms=ot(t),Se=lt(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});Se.addPlatform;Se.setPlatform;var Q;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Q||(Q={}));class ie extends Error{constructor(e,n,a){super(e),this.message=e,this.code=n,this.data=a}}const ut=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},ct=t=>{var e,n,a,s,r;const i=t.CapacitorCustomPlatform||null,o=t.Capacitor||{},u=o.Plugins=o.Plugins||{},f=t.CapacitorPlatforms,q=()=>i!==null?i.name:ut(t),L=((e=f==null?void 0:f.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||q,B=()=>L()!=="web",W=((n=f==null?void 0:f.currentPlatform)===null||n===void 0?void 0:n.isNativePlatform)||B,M=v=>{const h=c.get(v);return!!(h!=null&&h.platforms.has(L())||I(v))},P=((a=f==null?void 0:f.currentPlatform)===null||a===void 0?void 0:a.isPluginAvailable)||M,O=v=>{var h;return(h=o.PluginHeaders)===null||h===void 0?void 0:h.find($=>$.name===v)},I=((s=f==null?void 0:f.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||O,D=v=>t.console.error(v),N=(v,h,$)=>Promise.reject(`${$} does not have an implementation of "${h}".`),c=new Map,l=(v,h={})=>{const $=c.get(v);if($)return console.warn(`Capacitor plugin "${v}" already registered. Cannot register plugins twice.`),$.proxy;const U=L(),H=I(v);let R;const $e=async()=>(!R&&U in h?R=typeof h[U]=="function"?R=await h[U]():R=h[U]:i!==null&&!R&&"web"in h&&(R=typeof h.web=="function"?R=await h.web():R=h.web),R),Re=(y,p)=>{var S,k;if(H){const A=H==null?void 0:H.methods.find(C=>p===C.name);if(A)return A.rtype==="promise"?C=>o.nativePromise(v,p.toString(),C):(C,F)=>o.nativeCallback(v,p.toString(),C,F);if(y)return(S=y[p])===null||S===void 0?void 0:S.bind(y)}else{if(y)return(k=y[p])===null||k===void 0?void 0:k.bind(y);throw new ie(`"${v}" plugin is not implemented on ${U}`,Q.Unimplemented)}},ee=y=>{let p;const S=(...k)=>{const A=$e().then(C=>{const F=Re(C,y);if(F){const G=F(...k);return p=G==null?void 0:G.remove,G}else throw new ie(`"${v}.${y}()" is not implemented on ${U}`,Q.Unimplemented)});return y==="addListener"&&(A.remove=async()=>p()),A};return S.toString=()=>`${y.toString()}() { [capacitor code] }`,Object.defineProperty(S,"name",{value:y,writable:!1,configurable:!1}),S},ve=ee("addListener"),he=ee("removeListener"),Te=(y,p)=>{const S=ve({eventName:y},p),k=async()=>{const C=await S;he({eventName:y,callbackId:C},p)},A=new Promise(C=>S.then(()=>C({remove:k})));return A.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},A},te=new Proxy({},{get(y,p){switch(p){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return H?Te:ve;case"removeListener":return he;default:return ee(p)}}});return u[v]=te,c.set(v,{name:v,proxy:te,platforms:new Set([...Object.keys(h),...H?[U]:[]])}),te},w=((r=f==null?void 0:f.currentPlatform)===null||r===void 0?void 0:r.registerPlugin)||l;return o.convertFileSrc||(o.convertFileSrc=v=>v),o.getPlatform=L,o.handleError=D,o.isNativePlatform=W,o.isPluginAvailable=P,o.pluginMethodNoop=N,o.registerPlugin=w,o.Exception=ie,o.DEBUG=!!o.DEBUG,o.isLoggingEnabled=!!o.isLoggingEnabled,o.platform=o.getPlatform(),o.isNative=o.isNativePlatform(),o},dt=t=>t.Capacitor=ct(t),j=dt(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{}),fe=j.registerPlugin;j.Plugins;class qe{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s);const r=async()=>this.removeListener(e,n),i=Promise.resolve({remove:r});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()}}),i}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n){const a=this.listeners[e];a&&a.forEach(s=>s(n))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:a=>{this.notifyListeners(n,a)}}}unimplemented(e="not implemented"){return new j.Exception(e,Q.Unimplemented)}unavailable(e="not available"){return new j.Exception(e,Q.Unavailable)}async removeListener(e,n){const a=this.listeners[e];if(!a)return;const s=a.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){!e||(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}const pe=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Pe=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class ft extends qe{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(a=>{if(a.length<=0)return;let[s,r]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=Pe(s).trim(),r=Pe(r).trim(),n[s]=r}),n}async setCookie(e){try{const n=pe(e.key),a=pe(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,r=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${a||""}${s}; path=${r}; ${i};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}fe("CapacitorCookies",{web:()=>new ft});const vt=async t=>new Promise((e,n)=>{const a=new FileReader;a.onload=()=>{const s=a.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},a.onerror=s=>n(s),a.readAsDataURL(t)}),ht=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,r,i)=>(s[r]=t[e[i]],s),{})},wt=(t,e=!0)=>t?Object.entries(t).reduce((a,s)=>{const[r,i]=s;let o,u;return Array.isArray(i)?(u="",i.forEach(f=>{o=e?encodeURIComponent(f):f,u+=`${r}=${o}&`}),u.slice(0,-1)):(o=e?encodeURIComponent(i):i,u=`${r}=${o}`),`${a}&${u}`},"").substr(1):null,gt=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=ht(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const r=new URLSearchParams;for(const[i,o]of Object.entries(t.data||{}))r.set(i,o);n.body=r.toString()}else if(s.includes("multipart/form-data")){const r=new FormData;if(t.data instanceof FormData)t.data.forEach((o,u)=>{r.append(u,o)});else for(const o of Object.keys(t.data))r.append(o,t.data[o]);n.body=r;const i=new Headers(n.headers);i.delete("content-type"),n.headers=i}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class mt extends qe{async request(e){const n=gt(e,e.webFetchExtra),a=wt(e.params,e.shouldEncodeUrlParams),s=a?`${e.url}?${a}`:e.url,r=await fetch(s,n),i=r.headers.get("content-type")||"";let{responseType:o="text"}=r.ok?e:{};i.includes("application/json")&&(o="json");let u,f;switch(o){case"arraybuffer":case"blob":f=await r.blob(),u=await vt(f);break;case"json":u=await r.json();break;case"document":case"text":default:u=await r.text()}const q={};return r.headers.forEach((L,B)=>{q[B]=L}),{data:u,headers:q,status:r.status,url:r.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}fe("CapacitorHttp",{web:()=>new mt});function X(t){return new DataView(Uint8Array.from(t).buffer)}function yt(t){return Array.from(new Uint8Array(t.buffer))}function bt(t){return`0000${t.toString(16).padStart(4,"0")}-0000-1000-8000-00805f9b34fb`}function pt(t){const e=t.trim().split(" ").filter(n=>n!=="").map(n=>parseInt(n,16));return X(e)}function oe(t){return yt(t).map(e=>{let n=e.toString(16);return n.length==1&&(n="0"+n),n}).join(" ")}function xt(t){if(typeof t=="string")return t;if(typeof t=="number")return bt(t);throw new Error("Invalid UUID")}function Bt(t){const e={};if(!!t)return t.forEach((n,a)=>{e[a.toString()]=n}),e}const d=fe("BluetoothLe",{web:()=>Ue(()=>import("./web.5ed7ab35.js"),["assets/web.5ed7ab35.js","assets/QSpace.072bc939.js","assets/index.87a04e90.js","assets/index.5513f9a4.css","assets/QTabs.8ee498dc.js","assets/uid.42677368.js","assets/use-dark.b2a1d048.js","assets/focus-manager.d293fcd0.js","assets/QScrollObserver.96e5bc37.js","assets/QDialog.5d2fad78.js","assets/use-model-toggle.28a9ae70.js","assets/palette.fef6045e.js"]).then(t=>new t.BluetoothLeWeb)}),Pt=()=>{let t=Promise.resolve();return e=>new Promise((n,a)=>{t=t.then(()=>e()).then(n).catch(a)})};function le(t){return t?Pt():e=>e()}function g(t){if(typeof t!="string")throw new Error(`Invalid UUID type ${typeof t}. Expected string.`);if(t=t.toLowerCase(),!(t.search(/^[0-9a-f]{8}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{4}\b-[0-9a-f]{12}$/)>=0))throw new Error(`Invalid UUID format ${t}. Expected 128 bit string (e.g. "0000180d-0000-1000-8000-00805f9b34fb").`);return t}class Lt{constructor(){this.scanListener=null,this.eventListeners=new Map,this.queue=le(!0)}enableQueue(){this.queue=le(!0)}disableQueue(){this.queue=le(!1)}async initialize(e){await this.queue(async()=>{await d.initialize(e)})}async isEnabled(){return await this.queue(async()=>(await d.isEnabled()).value)}async enable(){await this.queue(async()=>{await d.enable()})}async disable(){await this.queue(async()=>{await d.disable()})}async startEnabledNotifications(e){await this.queue(async()=>{var n;const a="onEnabledChanged";await((n=this.eventListeners.get(a))===null||n===void 0?void 0:n.remove());const s=await d.addListener(a,r=>{e(r.value)});this.eventListeners.set(a,s),await d.startEnabledNotifications()})}async stopEnabledNotifications(){await this.queue(async()=>{var e;const n="onEnabledChanged";await((e=this.eventListeners.get(n))===null||e===void 0?void 0:e.remove()),this.eventListeners.delete(n),await d.stopEnabledNotifications()})}async isLocationEnabled(){return await this.queue(async()=>(await d.isLocationEnabled()).value)}async openLocationSettings(){await this.queue(async()=>{await d.openLocationSettings()})}async openBluetoothSettings(){await this.queue(async()=>{await d.openBluetoothSettings()})}async openAppSettings(){await this.queue(async()=>{await d.openAppSettings()})}async setDisplayStrings(e){await this.queue(async()=>{await d.setDisplayStrings(e)})}async requestDevice(e){return e=e?this.validateRequestBleDeviceOptions(e):void 0,await this.queue(async()=>await d.requestDevice(e))}async requestLEScan(e,n){e=this.validateRequestBleDeviceOptions(e),await this.queue(async()=>{var a;await((a=this.scanListener)===null||a===void 0?void 0:a.remove()),this.scanListener=await d.addListener("onScanResult",s=>{const r=Object.assign(Object.assign({},s),{manufacturerData:this.convertObject(s.manufacturerData),serviceData:this.convertObject(s.serviceData),rawAdvertisement:s.rawAdvertisement?this.convertValue(s.rawAdvertisement):void 0});n(r)}),await d.requestLEScan(e)})}async stopLEScan(){await this.queue(async()=>{var e;await((e=this.scanListener)===null||e===void 0?void 0:e.remove()),this.scanListener=null,await d.stopLEScan()})}async getDevices(e){if(!Array.isArray(e))throw new Error("deviceIds must be an array");return this.queue(async()=>(await d.getDevices({deviceIds:e})).devices)}async getConnectedDevices(e){if(!Array.isArray(e))throw new Error("services must be an array");return e=e.map(g),this.queue(async()=>(await d.getConnectedDevices({services:e})).devices)}async connect(e,n,a){await this.queue(async()=>{var s;if(n){const r=`disconnected|${e}`;await((s=this.eventListeners.get(r))===null||s===void 0?void 0:s.remove());const i=await d.addListener(r,()=>{n(e)});this.eventListeners.set(r,i)}await d.connect(Object.assign({deviceId:e},a))})}async createBond(e){await this.queue(async()=>{await d.createBond({deviceId:e})})}async isBonded(e){return await this.queue(async()=>(await d.isBonded({deviceId:e})).value)}async disconnect(e){await this.queue(async()=>{await d.disconnect({deviceId:e})})}async getServices(e){return await this.queue(async()=>(await d.getServices({deviceId:e})).services)}async discoverServices(e){await this.queue(async()=>{await d.discoverServices({deviceId:e})})}async getMtu(e){return await this.queue(async()=>(await d.getMtu({deviceId:e})).value)}async requestConnectionPriority(e,n){await this.queue(async()=>{await d.requestConnectionPriority({deviceId:e,connectionPriority:n})})}async readRssi(e){return await this.queue(async()=>{const a=await d.readRssi({deviceId:e});return parseFloat(a.value)})}async read(e,n,a,s){return n=g(n),a=g(a),await this.queue(async()=>{const i=await d.read(Object.assign({deviceId:e,service:n,characteristic:a},s));return this.convertValue(i.value)})}async write(e,n,a,s,r){return n=g(n),a=g(a),this.queue(async()=>{if(!(s!=null&&s.buffer))throw new Error("Invalid data.");let i=s;j.getPlatform()!=="web"&&(i=oe(s)),await d.write(Object.assign({deviceId:e,service:n,characteristic:a,value:i},r))})}async writeWithoutResponse(e,n,a,s,r){n=g(n),a=g(a),await this.queue(async()=>{if(!(s!=null&&s.buffer))throw new Error("Invalid data.");let i=s;j.getPlatform()!=="web"&&(i=oe(s)),await d.writeWithoutResponse(Object.assign({deviceId:e,service:n,characteristic:a,value:i},r))})}async readDescriptor(e,n,a,s,r){return n=g(n),a=g(a),s=g(s),await this.queue(async()=>{const o=await d.readDescriptor(Object.assign({deviceId:e,service:n,characteristic:a,descriptor:s},r));return this.convertValue(o.value)})}async writeDescriptor(e,n,a,s,r,i){return n=g(n),a=g(a),s=g(s),this.queue(async()=>{if(!(r!=null&&r.buffer))throw new Error("Invalid data.");let o=r;j.getPlatform()!=="web"&&(o=oe(r)),await d.writeDescriptor(Object.assign({deviceId:e,service:n,characteristic:a,descriptor:s,value:o},i))})}async startNotifications(e,n,a,s){n=g(n),a=g(a),await this.queue(async()=>{var r;const i=`notification|${e}|${n}|${a}`;await((r=this.eventListeners.get(i))===null||r===void 0?void 0:r.remove());const o=await d.addListener(i,u=>{s(this.convertValue(u==null?void 0:u.value))});this.eventListeners.set(i,o),await d.startNotifications({deviceId:e,service:n,characteristic:a})})}async stopNotifications(e,n,a){n=g(n),a=g(a),await this.queue(async()=>{var s;const r=`notification|${e}|${n}|${a}`;await((s=this.eventListeners.get(r))===null||s===void 0?void 0:s.remove()),this.eventListeners.delete(r),await d.stopNotifications({deviceId:e,service:n,characteristic:a})})}validateRequestBleDeviceOptions(e){return e.services&&(e.services=e.services.map(g)),e.optionalServices&&(e.optionalServices=e.optionalServices.map(g)),e}convertValue(e){return typeof e=="string"?pt(e):e===void 0?new DataView(new ArrayBuffer(0)):e}convertObject(e){if(e===void 0)return;const n={};for(const a of Object.keys(e))n[a]=this.convertValue(e[a]);return n}}const z=new Lt,J="c17378c5-b652-4e4b-9b53-45222f86e4d6",Ct="6eee",Et="9a11",_t="b177",Le=je("bluetooth",{state:()=>({connected:!1,dialog:!0,device:void 0}),getters:{isConnected:t=>t.connected},actions:{async initBluetooth(){try{await z.initialize(),this.device=await z.requestDevice({services:[J]}),console.log("device",this.device),await z.connect(this.device.deviceId,this.onDisconnect),this.dialog=!1,this.connected=!0}catch(t){console.error("Bluetooth init failed",t),this.connected=!1}},onDisconnect(t){console.log(`device ${t} disconnected`),this.connected=!1},sendBrightness(t){this.device&&z.write(this.device.deviceId,J,_t,X([t]))},sendPalette(t){this.device&&z.write(this.device.deviceId,J,Et,X([]))},sendGenerator(t){this.device&&z.write(this.device.deviceId,J,Ct,X([]))}}}),Ot={class:"row"},St=Ne({__name:"MainLayout",setup(t){const e=He(),n=Le(),a=[{name:"palettes",icon:"palette"},{name:"generators",icon:"api"},{name:"settings",icon:"settings"}],s=m(()=>e.settings.theme=="Dark"?re(["#011827","#412837"]):e.settings.theme=="Light"||!e.activePalette?re(["#aaccff","#ffaacc"]):re(e.activePaletteColors));return(r,i)=>{const o=ze("router-view");return we(),Ve(it,{view:"hHh lpr fFf",style:Qe(s.value)},{default:E(()=>[b(st,{class:"opaque-glass",elevated:""},{default:E(()=>[b(Ze,null,{default:E(()=>[b(ne),b(Xe,{shrink:"",class:"text-black"},{default:E(()=>[(we(),We(Fe,null,Me(a,u=>b(at,{key:u.name,to:"/"+u.name,icon:u.icon},null,8,["to","icon"])),64))]),_:1}),b(ne)]),_:1})]),_:1}),b(rt,null,{default:E(()=>[b(o)]),_:1}),b(nt,{modelValue:Y(n).dialog,"onUpdate:modelValue":i[2]||(i[2]=u=>Y(n).dialog=u)},{default:E(()=>[b(tt,{class:"opaque-glass"},{default:E(()=>[b(me,{class:"text-h6"},{default:E(()=>[ae("Connect to a Bluetooth Device")]),_:1}),b(me,null,{default:E(()=>[Ge("div",Ot,[b(ge,{onClick:i[0]||(i[0]=u=>Y(n).dialog=!1),dense:"",flat:"",class:"text-negative"},{default:E(()=>[ae("Ignore")]),_:1}),b(ne),b(ge,{class:"opaque-glass text-black",onClick:i[1]||(i[1]=u=>Y(Le)().initBluetooth())},{default:E(()=>[ae("Connect Device")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["style"])}}});var It=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"}));export{It as M,qe as W,pt as h,Bt as m,xt as w};
